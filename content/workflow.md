# ขั้นตอนการทำงาน

## โครงการ ระบบบันทึกเวลาเข้า-ออกงาน

### ขั้นตอนการทำงาน

- กำหนดหัวข้อโปรเจค ระบบบันทึกเวลาเข้า-ออกงาน
- กำหนดรายละเอียดเงื่อนไข เวลาเข้า-ออกงาน
- ไดรับฐานข้อมูล เช็คข้อมูล กำหนด กลุ่มของข้อมูล (เคสที่คิดเวลาทำงานได้(1.เคสเขียว), เคสทำงานครึ่งวัน(2.เคสเหลือง) และ เคสที่ไม่สามารถคิดเวลาได้(3.เคสแดง))
- เช็คความถูกต้องของข้อมูล
- update ข้อมูลพนักงาน เช่น รหัสพนักงาน
- คำนวณเวลางาน รวมถึง สาย และ OT
- จัดทำ Test Case scenarios เพื่อทดสอบความถูกต้องของข้อมูล ด้วย sql หรือผ่าน Vitest โดยการเขียนโปรแกรม
- สร้าง attendance_clean table เพื่อใช้ในการปรับแก้ข้อมูล
- จัดทำ procedure เพื่อใช้ในการคำนวณเวลางาน
- จัดทำ event เพื่อใช้ในการ insert และ update ข้อมูลใน attendance table โดยใช้ procedure แบบ Auto-run (ทำงานด้วยตัวเอง) เพื่อรัน 1 วัน ต่อครั้ง และรันทุกวัน
- จัดทำ Report

### Note
- การสร้าง procedure ช่วยลดเวลาคำนวน และ ช่วยในการลดความซับซ้อนของโค้ด
- การใช้ Vitest ช่วยในการลดเวลาทดสอบความถูกต้องของข้อมูล และง่ายกว่าการใช้ Sql ในการรัน Test Case 
- ตอนสร้าง event ต้องระวังเรื่องการ restart database เราต้องเข้าไปปรับใน config เพื่อไม่ให้มันปรับ OFF event โดยไม่ตั้งใจ (event ไม่ค่อยถูก support ในโปรแกรม ต้องตั้งค่าเพิ่ม)
    - ไฟล์ config อยู่ที่ /etc/mysql/mariadb.conf.d/50-server.cnf
    - ใต้บรรทัด mysqld ต้องเพิ่ม event_scheduler=ON
    - ทดลอง restart database เพื่อให้แน่ใจว่า event_scheduler=ON ทำงานได้ โดยใช้คำสั่ง sudo systemctl restart mariadb
    - และเช็คด้วยคำสั่ง show variables like 'event_scheduler';

    